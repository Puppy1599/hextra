{"/about/":{"data":{"":"","#":"","如果有一天#如果有一天…":"","快问快答#快问快答":"\n吴海隆 就读于： 太原理工大学 软件工程 邮箱： puppy1599@outlook.com 签名： 于道各努力，千里自同风 致谢 致我深爱的她 在这段追梦的旅途中，我最想感谢的是你。\n你像夜里的一束光，在我最焦虑、最孤独、最失落的时候，温柔地照亮我。\n当我被卡在代码的一行死循环时，是你的鼓励让我坚持下去；\n当我因为项目失败而怀疑自己时，是你的耐心与理解让我重新相信自己。\n愿我用未来所有的温柔与坚韧，回应你曾给予我的无限爱意。\n“你的名字，是我写过最温柔的代码。”\n致我亲爱的父母 感谢你们无条件的支持与信任，\n从我踏上编程这条道路开始，你们就给了我最大的自由与鼓励。\n或许你们不懂我写的每一行代码，不懂我学习到深夜的原因，\n但你们从来没有阻拦，只是把热好的饭菜放在桌上，把“早点休息”放在微信里。\n你们的理解，是我走到今天最大的底气。\n你们的爱，是我人生中最温柔的 buffer。\n愿我写下的每一行代码，\n都能回报我爱的人，和爱我的人。\n我的状态 编程技能： █████████░░░ 90% 安全研究： ███████░░░░░ 70% 熬夜抗性： ██████████ 100% 耐心调 Bug： ████████░░░░ 80% 对她的喜欢： ████████████████ 200%\n技术栈 🐍\nPython\r⚙️\nGo\r💻\nC++\r🌐\nHugo\r我的成长路径 2024：进入太原理工大学 2025：使用 Hugo 搭建博客 “摸鱼小窝” 现在在做什么？ 深度学习网络安全 最近在读 《Hello 算法 》— 靳宇栋 最近在听 《唯一》— 邓紫棋 如果有一天… 如果有一天，我不再做开发者了，\n那我可能会开一家书屋，养一只猫，晒晒太阳，\n晚上写博客、做做饭，偶尔为她写一封信。\n但现在，我更想把青春献给热爱的技术，\n和那个愿意陪我熬夜 debug 的人。\n快问快答 Q：最喜欢的编程语言？\nA：Go，极简而强大。\nQ：你相信什么？\nA：努力不会被辜负，但情感更值得珍惜。\nQ：你理想的生活？\nA：有人爱，有事做，有所期待。\n感谢你愿意了解我，愿我们都能用热爱创造世界。","我的成长路径#我的成长路径":"","我的状态#我的状态":"","技术栈#技术栈":"","最近在听#最近在听":"","最近在读#最近在读":"","现在在做什么#现在在做什么？":"","致谢#致谢":""},"title":"关于"},"/blog/":{"data":{"":" RSS 订阅 "},"title":"博客"},"/blog/debian-linux/":{"data":{"":" 即将更新：目录结构"},"title":"Debian Linux"},"/blog/debian-linux/%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE/":{"data":{"":"","#":"一、更改软件仓库镜像源 以 TUNA 清华源为例：Kali 软件仓库使用帮助\n1、在终端中执行命令，使用 vim 编辑器编辑 sources.list 文件\nsudo vim /etc/apt/sources.list 2、使用 # 注释 Kali 官方的镜像源并添加清华源\n# deb http://http.Kali.org/kali kali-rolling main contrib non-free non-free-firmware deb https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main non-free contrib non-free-firmware deb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main non-free contrib non-free-firmware Note\n以下为更换软件仓库镜像源涉及到的一些问题，可选择性观看。\n为什么要换源 Kali 使用 apt 命令安装软件包时会在软件仓库的镜像源中查找并下载安装，但默认的 Kali 官方源服务器位于国外，国内用户直接访问可能速度较慢，甚至出现安装失败的情况，因此需要更换国内镜像源（如清华源）加快软件下载和更新速度 为什么配镜像源有 deb 和 deb-src deb：指定二进制软件包的下载地址 deb-src：指定源代码包的下载地址 普通用户如果只是安装软件而无需源码，就可以禁用 deb-src 甚至删除 deb-src 行以节省 apt update 时间，如果需要阅读某个软件的源代码、重新编译软件或调试程序等就需要启用 deb-src 下载源码\n为什么 /etc/apt 有 sources.list 和 sources.list.d sources.list：主配置文件，存放系统默认的软件仓库地址（如官方源、第三方源等） sources.list.d：附加配置文件目录，用于存放额外的软件源配置文件（通常以 .list 结尾），不同的软件或第三方源可以单独存放一个文件，避免混在 sources.list 里 Docker 的源可能存放在 /etc/apt/sources.list.d/docker.list Google Chrome 的源可能存放在 /etc/apt/sources.list.d/google-chrome.list 二、网络配置 1、查看当前网络连接\nnmcli connection show NAME：接口名称 TYPE：类型 ethernet：以太网 loopback：回环 DEVICE：设备（网卡名） 记下需要修改网络配置的接口名称（NAME）\n┌──(hailo㉿kali-Hailo)-[~] └─$ sudo nmcli connection show NAME UUID TYPE DEVICE Wired connection 1 56d99757-efc2-4ee2-8887-ab710c94094f ethernet eth0 lo b9fa5e22-368b-450b-9928-a65db44b61f5 loopback lo 2、修改网络配置\nNAME：网络接口名称 ipv4.addresses：IP 地址 / 子网掩码 ipv4.gateway：默认网关 ipv4.dns：DNS 地址（可以只填主 DNS 地址，若有二级 DNS，使用 , 进行分隔） 腾讯云 DNSPod Public DNS：119.29.29.29 阿里云公共 DNS：223.5.5.5 ipv4.method：网络配置方式 manual：手动，即配置静态 IP 地址（static） auto：自动，即使用 DHCP 配置动态 IP 地址（dynamic） 配置静态 IP 地址：\nsudo nmcli connection modify \"NAME\" ipv4.addresses \"ADDRESS/NETMASK\" ipv4.gateway \"GATEWAY\" ipv4.dns \"DNS_ADDRESS,DNS_ADDRESS\" ipv4.method manual ┌──(hailo㉿kali-Hailo)-[~] └─$ sudo nmcli connection modify \"Wired connection 1\" ipv4.addresses \"192.168.50.20/24\" ipv4.gateway \"192.168.50.2\" ipv4.dns \"119.29.29.29,223.5.5.5\" ipv4.method manual 配置动态 IP 地址：\nsudo nmcli connection modify \"NAME\" ipv4.method auto ┌──(hailo㉿kali-Hailo)-[~] └─$ sudo nmcli connection modify \"Wired connection 1\" ipv4.method auto 3、重启网络服务使配置生效\nsudo systemctl restart NetworkManager 4、查看网络设备信息\nifconfig ┌──(hailo㉿kali-Hailo)-[~] └─$ ifconfig eth0: flags=4163\u003cUP,BROADCAST,RUNNING,MULTICAST\u003e mtu 1500 inet 192.168.50.133 netmask 255.255.255.0 broadcast 192.168.50.255 inet6 fe80::20c:29ff:fe13:bcaa prefixlen 64 scopeid 0x20\u003clink\u003e ether 00:0c:29:13:bc:aa txqueuelen 1000 (Ethernet) RX packets 995 bytes 74368 (72.6 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 242 bytes 68252 (66.6 KiB) TX errors 0 dropped 6 overruns 0 carrier 0 collisions 0 lo: flags=73\u003cUP,LOOPBACK,RUNNING\u003e mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10\u003chost\u003e loop txqueuelen 1000 (Local Loopback) RX packets 16 bytes 1128 (1.1 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 16 bytes 1128 (1.1 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 ┌──(hailo㉿kali-Hailo)-[~] └─$ ifconfig eth0: flags=4163\u003cUP,BROADCAST,RUNNING,MULTICAST\u003e mtu 1500 inet 192.168.50.20 netmask 255.255.255.0 broadcast 192.168.50.255 inet6 fe80::20c:29ff:fe13:bcaa prefixlen 64 scopeid 0x20\u003clink\u003e ether 00:0c:29:13:bc:aa txqueuelen 1000 (Ethernet) RX packets 995 bytes 74368 (72.6 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 292 bytes 81522 (79.6 KiB) TX errors 0 dropped 6 overruns 0 carrier 0 collisions 0 lo: flags=73\u003cUP,LOOPBACK,RUNNING\u003e mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10\u003chost\u003e loop txqueuelen 1000 (Local Loopback) RX packets 16 bytes 1128 (1.1 KiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 16 bytes 1128 (1.1 KiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 "},"title":"系统配置"},"/blog/debian-linux/%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/":{"data":{"":"","#":"一、apt 1、更新软件包列表 sudo apt update Note\n仅同步本地软件包索引与配置的软件源中的最新信息，但不会实际安装或升级任何软件。\n2、升级软件包 仅升级当前已安装的软件包，不会主动安装新依赖或删除旧包，适合日常维护，避免因依赖变化而导致系统不稳定。\nsudo apt upgrade 不仅会升级软件包，还会自动处理依赖关系（安装新依赖或删除冲突的旧包），适合大版本升级，解决复杂的依赖调整。\nsudo apt full-upgrade 3、安装指定的软件包 sudo apt install \u003cpackage_name\u003e 4、移除软件包 移除指定软件包但保留其配置文件\nsudo apt remove \u003cpackage_name\u003e 完全移除软件包及其配置文件\nsudo apt purge \u003cpackage_name\u003e 自动移除那些被安装作为其他软件包的依赖项，但现在不再被任何已安装软件包所需的软件包\nsudo apt autoremove 在已配置的软件源中搜索包含指定关键词的软件包\nsudo apt search \u003ckeyword\u003e "},"title":"终端命令"},"/docs/":{"data":{"":"","-快速入口#🚀 快速入口":"以下是本项目文档的主要部分，您可以直接点击标题跳转到相应章节：\nCisco PT 实验 渗透测试 ","api-参考#API 参考":"本部分列出了所有可用的 API 接口及其功能。每个 API 都附带详细的请求参数、响应说明以及代码示例，帮助开发者在应用中使用这些接口。\nAPI Endpoints GET /api/v1/resource POST /api/v1/resource …… 错误码说明 400: 错误请求 404: 资源未找到 500: 服务器错误 ","安全性#安全性":"为了确保 [项目名称] 的安全性，我们采用了以下措施：\n漏洞报告：如果您发现了安全漏洞，请立即通过 安全漏洞报告渠道 与我们联系。 安全最佳实践：遵循最佳实践来防止常见的安全问题，例如 SQL 注入、XSS 攻击等。 ","常见问题#常见问题":"这里列出了一些新用户常见的问题和解决方法。如果您遇到的问题没有出现在此处，欢迎查看联系我们部分。\n如何安装 [项目名称]？ 您可以通过以下命令来安装：[安装命令]\n如何配置项目？ 配置项位于 config.yml 文件中，具体配置说明请参阅配置章节。\n如何贡献代码？ 请参考贡献章节。","开始使用#开始使用":"在这一部分，我们将介绍如何安装、配置和运行 [项目名称]。它是新用户快速了解项目的关键部分。这里有：\n安装步骤 配置示例 第一个应用实例 常见问题解答 ","社区与支持#社区与支持":"加入我们的社区，和其他用户一起讨论、分享经验、获得帮助：\nSlack：加入我们的 Slack 频道，参与实时讨论：[加入链接] 论坛：访问我们的开发者论坛，获取更多支持：[讨论区链接] 邮件列表：订阅我们的邮件列表，第一时间获取最新动态：[邮件列表链接] ","许可证#许可证":"","贡献#贡献":"我们非常欢迎社区成员的贡献！以下是如何为项目贡献代码、报告问题、参与讨论的指南：\n报告问题\n如果您遇到 bug 或其他问题，请通过 GitHub Issues 提交。 贡献代码\nFork 本项目，提交 Pull Request 确保您的代码遵循项目的编码规范 测试您的修改，确保它们没有破坏现有功能 文档贡献\n如果您发现文档中的错误或不清晰的部分，可以提交修改建议或 Pull Request。 ","配置#配置":"在本部分，我们详细介绍了如何配置项目，确保它符合您的需求。包括：\n配置文件解析（如 config.yml） 配置示例 高级设置 ","项目更新#项目更新":"此部分提供最新版本的更新日志，展示每次版本发布的变更内容。\nv1.2.0 (2025-04-10)\n修复了某些API调用的bug 增强了用户界面，提升了响应速度 新增了多语言支持 v1.1.0 (2025-03-25)\n添加了 [新功能] 功能 改进了性能 "},"title":"文档"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/":{"data":{"":"这是 渗透测试 部分的概述内容…\nSQL 注入 环境配置 XSS 待完成内容：闭合方式判断、Cookie、base64、user-agent、refer 进行sql注入我需要获取user()还是current_user() file_priv hosts文件目录和作用 一句话木马"},"title":"渗透测试"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/":{"data":{"":"这是 环境配置 部分的概述内容…\n靶场部署 浏览器扩展 Burp Suite "},"title":"环境配置"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%A9%E5%B1%95/":{"data":{"":"","#":"1、HackBar "},"title":"浏览器扩展"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/%E9%9D%B6%E5%9C%BA%E9%83%A8%E7%BD%B2/":{"data":{"":"","#":"一、sqli-labs 1、安装 phpStudy 根据自己的操作系统下载 32 位 或 64 位版本（一般是 64 位），下载链接：phpStudy\nWarning\n将 phpStudy 安装到 C:\\phpstudy_pro（自定义安装目录时注意路径中不能出现空格）\n2、下载 sqli-labs 使用 git 克隆项目，项目地址：sqli-labs\ngit clone https://github.com/Audi-1/sqli-labs.git sqli-labs 3、配置 sqli-labs 启动 phpStudy 的 Web 服务\n删除 phpStudy 的默认网站\n在 phpStudy 中新建网站\n域名：localhost PHP版本：php5.3.29nts（需要安装） Note\n这里选择 php5.3.29nts 版本是因为 sqli-labs 是一个比较老的项目，使用的部分 php 代码在新版本中可能不支持或已被移除。\n修改数据库 root 密码\n打开 localhost 网站根目录\n在根目录中新建 index.php 文件并添加以下内容（便于后续部署多个靶场）\n\u003c?php header('Content-Type: text/html; charset=utf-8'); // 允许显示的目录 $allowed_dirs = array('sqli-labs'); echo \"\u003ch4\u003e靶场目录\u003c/h4\u003e\"; echo \"\u003cul\u003e\"; foreach($allowed_dirs as $dir) { if(is_dir($dir)) { echo \"\u003cli\u003e\u003ca href='$dir/'\u003e\" . ucfirst($dir) . \"\u003c/a\u003e\u003c/li\u003e\"; } } echo \"\u003c/ul\u003e\"; ?\u003e Note\n$allowed_dirs = array('sqli-labs'); 这里的 'sqli-labs' 是靶场的目录名，可以根据实际情况添加或修改，多个目录名之间使用半角逗号 , 进行分隔。\n将下载的 sqli-labs 复制到网站根目录\n修改 sqli-labs\\sql-connections\\db-creds.inc 数据库连接配置文件\n$dbuser='root'：使用 root 用户\n$dbpass='123456'：修改过后的 root 用户的密码\n使用 IP 地址访问靶场目录中的 sqli-labs\n安装 / 初始化 sqli-labs\n显示如下信息表示安装成功\n使用 sqli-labs 进行 SQL 注入的学习"},"title":"靶场部署"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/burp-suite/":{"data":{"":"","#":"一、Java 环境的配置 Note\nBurp Suite 是一个基于 Java 开发的应用程序，因此需要配置 Java 环境来执行其代码。\n下载链接：Oracle Java\n下载 Windows 版本的 JDK\n将 JDK 的压缩包解压到任意指定的目录（以 D:\\Program Files\\Java 为例）\n配置环境变量\n新建系统变量 JAVA_HOME （以 D:\\Program Files\\Java\\jdk-24 为例）\n编辑系统环境变量 Path，添加 %JAVA_HOME%\\bin\n验证 Java 环境\njava -version 检查 Java 版本 javac -version 检查 Java 编译器版本 二、Burp Suite 的安装 下载链接：Burp Suite\n下载 JAR 版本的 Burp Suite\n下载 BurpLoaderKeygen\nWarning\n由于涉及到版权问题，该软件请在 Github 或 Bing 等网站自行搜索下载，仅供学习和交流使用，商业使用请购买正版软件！\n将下载的 Burp Suite 和 BurpLoaderKeygen 放在任意指定的目录（以 D:\\Program Files\\burpsuite_pro 为例）\n启动 BurpLoaderKeygen 加载器（在 D:\\Program Files\\burpsuite_pro 目录）\njava -jar BurpLoaderKeygen.jar 配置 BurpLoaderKeygen 加载器\n勾选 Auto Run，下次打开 BurpLoaderKeygen 时会自动运行 Burp Suite 任意修改 License Text（可选，以 licensed to Hailo 为例） 复制 License 的内容 点击 Run 运行 Burp Suite 激活 Burp Suite\n点击 Next 跳过 License Agreement\n将之前复制 License 的内容粘贴到 License Key\n选择手动激活 Manual activation\n复制 request\n粘贴到 BurpLoaderKeygen 的 Activation Request 并复制 Activation Response\n粘贴到 Burp Suite 的 response\n成功激活\n优化 Burp Suite 的启动\n新建 burpsuite.bat 文件并放到 Burp Suite 的同级目录下\njava -jar \"D:\\Program Files\\burpsuite_pro\\BurpLoaderKeygen.jar\" 将 D:\\Program Files\\burpsuite_pro 添加到系统环境变量\n在 cmd 中使用 burpsuite 命令运行 Burp Suite"},"title":"Burp Suite"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/sql-%E6%B3%A8%E5%85%A5/":{"data":{"":"这是 渗透测试 部分的概述内容…\n基本流程 sqli-labs 攻略 "},"title":"SQL 注入"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/sql-%E6%B3%A8%E5%85%A5/sqli-labs-%E6%94%BB%E7%95%A5/":{"data":{"":"","#":"一、Page-1 "},"title":"Sqli Labs 攻略"},"/docs/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/xss/":{"data":{"":"这是 渗透测试 部分的概述内容…\nPortSwigger 攻略 "},"title":"XSS"},"/docs/cisco-pt-%E5%AE%9E%E9%AA%8C/":{"data":{"":"这是 Cisco PT 实验 部分的概述内容…","-快速入口#🚀 快速入口":"以下是本项目文档的主要部分，您可以直接点击标题跳转到相应章节：\nVLAN 基础配置 跨 VLAN 通信 "},"title":"Cisco PT 实验"},"/docs/cisco-pt-%E5%AE%9E%E9%AA%8C/%E8%B7%A8-vlan-%E9%80%9A%E4%BF%A1/":{"data":{"":"","#":"一、使用路由器的两个物理端口 Cisco PT 拓扑图 实验流程 1、配置 PC 的 IP 地址 2、配置路由器端口的 IP 地址 Router\u003een Router#conf t Enter configuration commands, one per line. End with CNTL/Z. Router(config)#int g 0/0/0 Router(config-if)#ip add 192.168.1.254 255.255.255.0 Router(config-if)#no sh Router(config-if)# %LINK-5-CHANGED: Interface GigabitEthernet0/0/0, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/0, changed state to up Router(config-if)#int g0/0/1 Router(config-if)#ip add 192.168.2.254 255.255.255.0 Router(config-if)#no sh Router(config-if)# %LINK-5-CHANGED: Interface GigabitEthernet0/0/1, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/1, changed state to up 3、配置 VLAN Switch\u003een Switch#conf t Enter configuration commands, one per line. End with CNTL/Z. Switch(config)#vlan 10 Switch(config-vlan)#vlan 20 Switch(config-vlan)#exit Switch(config)#int f0/1 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 10 Switch(config-if)#int f0/2 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 20 Switch(config-if)#do sh vl b Switch(config-if)#int g0/1 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 10 Switch(config-if)#int g0/2 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 20 4、跨 VLAN 通信 ping 192.168.2.1 5、实验分析 当主机 ping 192.168.2.1 时，会检查目标 IP 是否与自身 IP 处于同一网段\n目标 IP 与源 IP 不在同一网段时，主机会将数据包发送到路由器进行路由\n主机查找自身的 ARP 缓存表中路由器的 MAC 地址条目并将 ICMP 包发送到路由器\n若自身 ARP 缓存表中不存在路由器的 MAC 地址条目，会先发送 ARP 报文请求路由器的 MAC 地址，然后将 ICMP 包发送到路由器\nICMP 包从 F0/1 端口进入交换机后会在帧头封装一个 802.1Q VLAN 标签\nTPID：一般为 0x8100，表示这是一个带 VLAN 标签的帧 TCI：包含了 VLAN ID 和优先级等信息 PRI：表示帧的优先级，当交换机阻塞时优先级高的帧会优先发送 CFI：表示 MAC 地址是否为经典格式，在以太网中的值通常为 0（经典格式） VLAN ID：VLAN 编号 ICMP 包从 G0/1 端口离开交换机前会剥掉帧头的 VLAN 标签\nICMP 包从 G0/2 端口进入交换机和从 F0/2 端口离开交换机以及目标主机回包时重复上述步骤，完成通信\nTip\n通过 TCI 判断数据帧所属的 VLAN ：整个 TCI 字段的后 12 位就是 VLAN ID，也可以使用计算公式（VID = TCI \u0026 0x0FFF）。 以 0x000a 为例，该 TCI 字段的后 12 位为 0x00a，即十进制的 10，因此该数据帧属于 VLAN 10。\n6、实验中遇到的问题 Important\n请先尝试自己思考，然后查看答案。\n交换机的 G0/1 和 G0/2 端口设置为 trunk 模式无法进行正常通信 ARP 报文从 F0/1 端口进入交换机后会在帧头封装一个 VLAN 标签 若将 G0/1 和 G0/2 端口设置为 trunk 模式，交换机转发数据帧时不会剥掉 VLAN 标签 路由器的 G0/0/0 和 G0/0/1 是普通物理端口，无法识别携带 VLAN 标签的数据帧 ARP 报文被路由器直接丢弃，主机无法获取到网关的 IP 地址，也就无法发送 ICMP 包 Simulation 看不到数据帧中封装的 VLAN 标签 F0/1 端口是 access 模式，数据帧进入交换机后会在帧头封装一个 VLAN 标签 G0/1 端口是 access 模式，数据帧离开交换机前又会剥掉帧头中的 VLAN 标签 F0/2 和 G0/2 原理同上，VLAN 标签仅在交换机内部进行处理 所以无法在 Simulation 看到数据帧中封装的 VLAN 标签 二、单臂路由 Cisco PT 拓扑图 实验流程 1、配置 PC 的 IP 地址 2、配置路由器端口的 IP 地址 Router\u003een Router#conf t Enter configuration commands, one per line. End with CNTL/Z. Router(config)#int g0/0/0 Router(config-if)#no sh Router(config-if)# %LINK-5-CHANGED: Interface GigabitEthernet0/0/0, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/0, changed state to up Router(config-if)#int g0/0/0.10 Router(config-subif)# %LINK-5-CHANGED: Interface GigabitEthernet0/0/0.10, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/0.10, changed state to up Router(config-subif)#en dot1q 10 Router(config-subif)#ip add 192.168.1.254 255.255.255.0 Router(config-subif)#int g0/0/0.20 Router(config-subif)# %LINK-5-CHANGED: Interface GigabitEthernet0/0/0.20, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0/0.20, changed state to up Router(config-subif)#en dot1q 20 Router(config-subif)#ip add 192.168.2.254 255.255.255.0 3、配置 VLAN Switch\u003een Switch#conf t Enter configuration commands, one per line. End with CNTL/Z. Switch(config)#int f0/1 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 10 % Access VLAN does not exist. Creating vlan 10 Switch(config-if)#int f0/2 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 20 % Access VLAN does not exist. Creating vlan 20 Switch(config-if)#int g0/1 Switch(config-if)#sw mo tr Switch(config-if)# %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to down %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to up Switch(config-if)#sw tr al vl al 4、跨 VLAN 通信 ping 192.168.2.1 5、实验分析 使用路由器的单个物理端口创建多个虚拟子接口 在子接口中使用命令 encapsulation dot1Q vlan \u003cVLAN_ID\u003e 启用 dot1Q 封装 进行 dot1Q 封装后的虚拟子接口可以处理携带 VLAN 标签的数据帧 将交换机的 G0/1 端口设置为 trunk 模式，使所有 VLAN 流量都可以到达路由器 ICMP 包从 F0/1 端口进入交换机后会在帧头封装一个 VLAN 10 标签 由于 G0/1 端口是 trunk 模式，转发数据帧时不会剥掉帧头的 VLAN 10 标签 路由器的 G0/0/0.10 子接口收到携带 VLAN 10 标签的数据帧后会进行路由和转发 路由器的 G0/0/0.20 子接口转发数据前会替换 VLAN 标签为 VLAN 20 由于 F0/2 端口是 access 模式，交换机剥掉数据帧中的 VLAN 20 标签后转发到目标主机 三、三层交换技术 Cisco PT 拓扑图 实验流程 1、配置 PC 的 IP 地址 2、配置三层交换机的路由功能 Switch\u003een Switch#conf t Enter configuration commands, one per line. End with CNTL/Z. Switch(config)#vlan 10 Switch(config-vlan)#vlan 20 Switch(config-vlan)#exit Switch(config)#int vlan 10 Switch(config-if)# %LINK-5-CHANGED: Interface Vlan10, changed state to up Switch(config-if)#ip add 192.168.1.254 255.255.255.0 Switch(config-if)#int vlan 20 Switch(config-if)# %LINK-5-CHANGED: Interface Vlan20, changed state to up Switch(config-if)#ip add 192.168.2.254 255.255.255.0 Switch(config-if)#exit Switch(config)#ip routing Switch(config)#int g1/0/1 Switch(config-if)#sw mo tr Switch(config-if)# %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/1, changed state to down %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/1, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan10, changed state to up %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan20, changed state to up Switch(config-if)#sw tr al vl al Switch(config-if)#int g1/0/2 Switch(config-if)#sw mo tr Switch(config-if)# %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/2, changed state to down %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet1/0/2, changed state to up Switch(config-if)#sw tr al vl al Switch(config-if)#exit Switch(config)#do sh ip route Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2 E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area * - candidate default, U - per-user static route, o - ODR P - periodic downloaded static route Gateway of last resort is not set C 192.168.1.0/24 is directly connected, Vlan10 C 192.168.2.0/24 is directly connected, Vlan20 Switch(config)# 3、配置二层交换机 VLAN 交换机 S1：\nSwitch\u003een Switch#conf t Enter configuration commands, one per line. End with CNTL/Z. Switch(config)#int g0/1 Switch(config-if)#sw mo tr Switch(config-if)#sw tr al vl al Switch(config-if)#int f0/1 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 10 % Access VLAN does not exist. Creating vlan 10 Switch(config-if)# 交换机 S2：\nSwitch\u003een Switch#conf t Enter configuration commands, one per line. End with CNTL/Z. Switch(config)#int f0/1 Switch(config-if)#sw mo ac Switch(config-if)#sw ac vl 20 % Access VLAN does not exist. Creating vlan 20 Switch(config-if)#int g0/1 Switch(config-if)#sw mo tr Switch(config-if)#sw tr al vl al Switch(config-if)# 4、跨 VLAN 通信 ping 192.168.2.1 5、实验分析 四、单臂路由访问互联网 五、三层交换技术访问互联网 "},"title":"跨 VLAN 通信"},"/docs/cisco-pt-%E5%AE%9E%E9%AA%8C/vlan-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/":{"data":{"":"","#":"Cisco PT 拓扑图 实验流程 Switch(config)#vlan 10 Switch(config-vlan)#exit Switch(config)#vlan 20 Switch(config-vlan)#exit 创建 VLAN vlan \u003cVLAN_ID\u003e (vlan 10) Switch#show vlan VLAN Name Status Ports ---- -------------------------------- --------- ------------------------------- 1 default active Fa0/1, Fa0/2, Fa0/3, Fa0/4 Fa0/5, Fa0/6, Fa0/7, Fa0/8 Fa0/9, Fa0/10, Fa0/11, Fa0/12 Fa0/13, Fa0/14, Fa0/15, Fa0/16 Fa0/17, Fa0/18, Fa0/19, Fa0/20 Fa0/21, Fa0/22, Fa0/23, Fa0/24 Gig0/1, Gig0/2 10 VLAN0010 active 20 VLAN0020 active 1002 fddi-default active 1003 token-ring-default active 1004 fddinet-default active 1005 trnet-default active VLAN Type SAID MTU Parent RingNo BridgeNo Stp BrdgMode Trans1 Trans2 ---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------ 1 enet 100001 1500 - - - - - 0 0 10 enet 100010 1500 - - - - - 0 0 20 enet 100020 1500 - - - - - 0 0 1002 fddi 101002 1500 - - - - - 0 0 1003 tr 101003 1500 - - - - - 0 0 1004 fdnet 101004 1500 - - - ieee - 0 0 1005 trnet 101005 1500 - - - ibm - 0 0 VLAN Type SAID MTU Parent RingNo BridgeNo Stp BrdgMode Trans1 Trans2 ---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------ Remote SPAN VLANs ------------------------------------------------------------------------------ Primary Secondary Type Ports ------- --------- ----------------- ------------------------------------------ Switch#show vlan brief VLAN Name Status Ports ---- -------------------------------- --------- ------------------------------- 1 default active Fa0/1, Fa0/2, Fa0/3, Fa0/4 Fa0/5, Fa0/6, Fa0/7, Fa0/8 Fa0/9, Fa0/10, Fa0/11, Fa0/12 Fa0/13, Fa0/14, Fa0/15, Fa0/16 Fa0/17, Fa0/18, Fa0/19, Fa0/20 Fa0/21, Fa0/22, Fa0/23, Fa0/24 Gig0/1, Gig0/2 10 VLAN0010 active 20 VLAN0020 active 1002 fddi-default active 1003 token-ring-default active 1004 fddinet-default active 1005 trnet-default active Switch#show vlan id 1 VLAN Name Status Ports ---- -------------------------------- --------- ------------------------------- 1 default active Fa0/1, Fa0/2, Fa0/3, Fa0/4 Fa0/5, Fa0/6, Fa0/7, Fa0/8 Fa0/9, Fa0/10, Fa0/11, Fa0/12 Fa0/13, Fa0/14, Fa0/15, Fa0/16 Fa0/17, Fa0/18, Fa0/19, Fa0/20 Fa0/21, Fa0/22, Fa0/23, Fa0/24 Gig0/1, Gig0/2 VLAN Type SAID MTU Parent RingNo BridgeNo Stp BrdgMode Trans1 Trans2 ---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------ 1 enet 100001 1500 - - - - - 0 0 显示所有 VLAN 及其基本信息 show vlan brief 显示所有 VLAN 及其详细信息 show vlan 显示单个 VLAN 详细信息 show vlan id \u003cVLAN_ID\u003e (show vlan id 1) Switch(config)#interface fastEthernet 0/2 Switch(config-if)#switchport mode access Switch(config-if)#exit Switch(config)#interface fastEthernet 0/3 Switch(config-if)#switchport mode access Switch(config-if)#exit 将端口设置为接入（Access）模式 switchport mode access Switch(config)#interface fastEthernet 0/2 Switch(config-if)#switchport access vlan 10 Switch(config-if)#exit Switch(config)#interface fastEthernet 0/3 Switch(config-if)#switchport access vlan 20 Switch(config-if)#exit 为端口设置默认 VLAN switchport access vlan \u003cVLAN_ID\u003e (switchport access vlan 10) Switch#show interfaces switchport Name: Fa0/1 Switchport: Enabled Administrative Mode: dynamic auto Operational Mode: static access Administrative Trunking Encapsulation: dot1q Operational Trunking Encapsulation: native Negotiation of Trunking: On Access Mode VLAN: 1 (default) Trunking Native Mode VLAN: 1 (default) Voice VLAN: none Administrative private-vlan host-association: none Administrative private-vlan mapping: none Administrative private-vlan trunk native VLAN: none Administrative private-vlan trunk encapsulation: dot1q Administrative private-vlan trunk normal VLANs: none Administrative private-vlan trunk private VLANs: none Operational private-vlan: none Trunking VLANs Enabled: All Pruning VLANs Enabled: 2-1001 Capture Mode Disabled Capture VLANs Allowed: ALL Protected: false Unknown unicast blocked: disabled Unknown multicast blocked: disabled Appliance trust: none Name: Fa0/2 Switchport: Enabled Administrative Mode: static access Operational Mode: static access Administrative Trunking Encapsulation: dot1q Operational Trunking Encapsulation: native Negotiation of Trunking: Off Access Mode VLAN: 10 (VLAN0010) Trunking Native Mode VLAN: 1 (default) Voice VLAN: none Administrative private-vlan host-association: none Administrative private-vlan mapping: none Administrative private-vlan trunk native VLAN: none Administrative private-vlan trunk encapsulation: dot1q Administrative private-vlan trunk normal VLANs: none Administrative private-vlan trunk private VLANs: none Operational private-vlan: none Trunking VLANs Enabled: All Pruning VLANs Enabled: 2-1001 Capture Mode Disabled Capture VLANs Allowed: ALL Protected: false Unknown unicast blocked: disabled Unknown multicast blocked: disabled Appliance trust: none Name: Fa0/3 Switchport: Enabled Administrative Mode: static access Operational Mode: static access Administrative Trunking Encapsulation: dot1q Operational Trunking Encapsulation: native Negotiation of Trunking: Off Access Mode VLAN: 20 (VLAN0020) Trunking Native Mode VLAN: 1 (default) Voice VLAN: none Administrative private-vlan host-association: none Administrative private-vlan mapping: none Administrative private-vlan trunk native VLAN: none Administrative private-vlan trunk encapsulation: dot1q Switch#show interfaces fastethernet 0/2 switchport Name: Fa0/2 Switchport: Enabled Administrative Mode: static access Operational Mode: static access Administrative Trunking Encapsulation: dot1q Operational Trunking Encapsulation: native Negotiation of Trunking: Off Access Mode VLAN: 10 (VLAN0010) Trunking Native Mode VLAN: 1 (default) Voice VLAN: none Administrative private-vlan host-association: none Administrative private-vlan mapping: none Administrative private-vlan trunk native VLAN: none Administrative private-vlan trunk encapsulation: dot1q Administrative private-vlan trunk normal VLANs: none Administrative private-vlan trunk private VLANs: none Operational private-vlan: none Trunking VLANs Enabled: All Pruning VLANs Enabled: 2-1001 Capture Mode Disabled Capture VLANs Allowed: ALL Protected: false Unknown unicast blocked: disabled Unknown multicast blocked: disabled Appliance trust: none 查看所有端口的详细状态 show interfaces switchport 查看单个接口的详细状态 show interfaces \u003cINTERFACES_ID\u003e switchport (show interfaces fastethernet 0/2 switchport) Switch(config-if)#switchport mode trunk Switch(config-if)# %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to down %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up 将端口设置为干道（Trunk）模式 switchport mode trunk Switch(config-if)#switchport trunk allowed vlan all Switch(config-if)#exit Switch(config)#do show interfaces f0/1 switchport Name: Fa0/1 Switchport: Enabled Administrative Mode: trunk Operational Mode: trunk Administrative Trunking Encapsulation: dot1q Operational Trunking Encapsulation: dot1q Negotiation of Trunking: On Access Mode VLAN: 1 (default) Trunking Native Mode VLAN: 1 (default) Voice VLAN: none Administrative private-vlan host-association: none Administrative private-vlan mapping: none Administrative private-vlan trunk native VLAN: none Administrative private-vlan trunk encapsulation: dot1q Administrative private-vlan trunk normal VLANs: none Administrative private-vlan trunk private VLANs: none Operational private-vlan: none Trunking VLANs Enabled: All Pruning VLANs Enabled: 2-1001 Capture Mode Disabled Capture VLANs Allowed: ALL Protected: false Unknown unicast blocked: disabled Unknown multicast blocked: disabled Appliance trust: none 允许 Trunk 端口通过所有 VLAN 流量 switchport trunk allowed vlan all Switch#show interfaces trunk Port Mode Encapsulation Status Native vlan Fa0/1 on 802.1q trunking 1 Port Vlans allowed on trunk Fa0/1 1-1005 Port Vlans allowed and active in management domain Fa0/1 1,10,20 Port Vlans in spanning tree forwarding state and not pruned Fa0/1 1,10,20 查看当前配置为 Trunk 的端口及其详细信息 show interfaces trunk "},"title":"VLAN 基础配置"}}